#!/bin/sh

# Displays number of unread mail and an loading icon if updating.
# When clicked, brings up `mutt`.

case $BUTTON in
	1) setsid -f "$TERMINAL" -e mutt ;;
	2) setsid -f chkMailbox >/dev/null ;;
	3) notify-send "ğŸ“¬ é‚®ä»¶æ¨¡å—" "\- æŸ¥çœ‹æœªè¯»é‚®ä»¶
- å›¾æ ‡[ğŸ“¬:ğŸ“©]è¡¨ç¤ºé‚®ä»¶æ­£åœ¨åŒæ­¥ä¸­...
- å·¦é”®ç‚¹å‡»æ‰“å¼€mutt
- ä¸­é”®ç‚¹å‡»ç«‹å³åŒæ­¥é‚®ä»¶" ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

pidof mbsync >/dev/null 2>&1 && echo "ğŸ“¬:ğŸ“©" ||
{
        unread="$(find "${XDG_DATA_HOME:-$HOME/.local/share}"/mail/*/[Ii][Nn][Bb][Oo][Xx]/new/* -type f 2>/dev/null | wc -l 2>/dev/null)"
        [ "$unread" != "0" ] && mpv --no-video --no-terminal ./email.recv.mp3 && notify-send "ğŸ“¬ æ¸©é¦¨æç¤ºï¼šæ‚¨æœ‰($unread)å°æœªè¯»é‚®ä»¶"
        echo "ğŸ“¬:$unread(Mail)"
}


